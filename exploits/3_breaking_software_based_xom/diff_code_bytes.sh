#!/bin/bash

cat dumped_left_sliding_bytes.out | ../../tools/lib/beautify.py > dumped_left_sliding_bytes.beautified.out

LEAK_BYTES=$(python -c "print '%d' % (0x8a55b8)")

PRINT_FROM_ADDR=$(echo 0x`sudo grep ffffffff /proc/kallsyms | head -1` | awk '{print $1}')
PRINT_FROM_ADDR=$(python -c "print '0x%x' % (${PRINT_FROM_ADDR}+0x8a55b8-${LEAK_BYTES})")

../../tools/print_kernel_bytes.sh $PRINT_FROM_ADDR $LEAK_BYTES > expected_bytes-left_slide.out
cat expected_bytes-left_slide.out | ../../tools/lib/beautify.py > expected_bytes-left_slide.beautified.out

diff dumped_left_sliding_bytes.beautified.out expected_bytes-left_slide.beautified.out
